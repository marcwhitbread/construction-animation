"use strict";var app=angular.module("ConstructionApp",[]),interval=void 0,floors=26,basement_floors=4,p1_p2_floor_distance=4,start_at_floor=5,structure_p1_build_delay=2e3,p2_build_done_delay=0*structure_p1_build_delay,structure_p2_build_delay=structure_p1_build_delay*p1_p2_floor_distance,structure_crane_build_delay=structure_p1_build_delay*basement_floors,structure_bd1_build_delay=3.5*structure_p1_build_delay,structure_bd2_sheet_build_delay=8.5*structure_p1_build_delay,structure_p3_build_delay=1*structure_p1_build_delay,structure_bd2_build_delay=structure_p1_build_delay*basement_floors-structure_p1_build_delay/2,plot_width=140,plot_depth=140,plot_height=2,crane_width=8,structure_width=100,structure_depth=100,structure_story_indent=6,structure_story_height=11,structure_story_railing_height=3,structure_story_floor_height=1,structure_story_pillar_indent=4,structure_roof_height=5,structure_build_panel_unindent=2,structure_height=floors*(structure_story_height+structure_story_floor_height)+5,structure_build_deck_height=5,structure_build_deck_panel_1_height=1.5*(structure_story_height+structure_story_floor_height),structure_build_deck_panel_2_height=1.5*(structure_story_height+structure_story_floor_height),structure_wrap_1_floors=1.5,structure_wrap_1_height=30,structure_wrap_2_floors=5,structure_wrap_2_height=structure_wrap_2_floors*(structure_story_height+structure_story_floor_height),structure_wrap_indent=5;app.controller("BuildDeckCtrl",["$scope",function(){}]),app.controller("MainCtrl",["$scope",function(){}]),app.controller("PlotCtrl",["$scope","Plot","Pallet",function(a,b,c){var d={width:140,depth:140,height:2,colors:{dirt:"#6d574c"}},e=new c(d.colors.dirt);a.shape={sides:[1,2,3,4,5,6]},a.plot=new b(d.width,d.depth,d.height,e)}]),app.controller("StoryCtrl",["$scope",function(){}]),app.controller("StructureCtrl",["$scope","$filter","Structure","BuildDeck","Story",function(a,b,c,d,e){var f={floors:24,basement_floors:4,width:100,depth:100,roof_height:5,base_indent:4,build_panel_unindent:2,build_deck_height:5,wrap_1_floors:2.5,wrap_2_floors:6,wrap_indent:5,steel_width:4,fence_indent:2,pillar_p2_width:8,story_indent:6,story_height:11,story_railing_height:3,story_floor_height:1,story_pillar_indent:4};a.structure=new c(f.floors,f.basement_floors,f.width,f.depth,f.roof_height,f.base_indent,f.steel_width,f.fence_indent,f.pillar_p2_width,f.story_indent,f.story_height,f.story_railing_height,f.story_floor_height,f.story_pillar_indent,a.plot),a.stories=[];for(var g=0;g<a.structure.floors;g++)a.stories.push(new e(g,f.story_indent,f.story_height,f.story_railing_height,f.story_floor_height,a.structure.story_pillar_indent,a.structure.floors,a.structure.basement_floors,a.structure));a.build_decks=[],a.build_decks.push(new d(1,f.build_panel_unindent,f.build_deck_height,f.wrap_indent,f.wrap_1_floors,a.stories[0],a.structure)),a.build_decks.push(new d(2,f.build_panel_unindent,f.build_deck_height,f.wrap_indent,f.wrap_2_floors,a.stories[0],a.structure))}]),app.factory("BuildDeck",[function(){var a=function(a,b,c,d,e,f,g){this.id=a,this.panel_unindent=b,this.height=c,this.wrap_indent=d,this.wrap_floors=e,this.story=f,this.structure=g,this.style=this.style()};return a.prototype={wrap_height:function(){return this.wrap_floors*(this.story.height+this.story.floor_height)},panel_height:function(){return 1.5*(this.story.height+this.story.floor_height)},style:function(){var a={base:{width:this.structure.width+"px",height:this.height+"px",webkitTransform:"translate3d(0, "+(-this.panel_height()/2-this.structure.plot.height/2-100)+"px, 0)"},panel:{width:this.structure.width+"px",height:this.panel_height()+"px",webkitTransform:"translate3d(0, "+(-(this.height-this.panel_height())/2-this.height+this.panel_height()/2)+"px, 0)"},sheet:{width:this.structure.width-2*this.wrap_indent+"px",height:this.wrap_height()+"px",maxHeight:this.wrap_height()+"px",webkitTransform:"translate3d("+this.wrap_indent+"px, "+(-this.height/2+this.panel_height()/2)+"px, 0)"}};return a}},a}]),app.factory("Pallet",[function(){var a=function(a){this.dirt=a};return a.prototype={},a}]),app.factory("Plot",[function(){var a=function(a,b,c,d){this.width=a,this.depth=b,this.height=c,this.pallet=d};return a.prototype={style:function(){return{width:this.width+"px",height:this.height+"px"}}},a}]),app.factory("Shape",[function(){var a=function(){};return a.prototype={},a}]),app.factory("Side",[function(){var a=function(a,b,c,d,e,f,g){this.position=a,this.width=b,this.depth=c,this.height=d,this.color=e,this.pattern=f,this.flex=g,this.style=this.style(this.position)};return a.prototype={style:function(a){var b={color:this.color};switch(a){case 0:b.webkitTransform="rotateY(0deg) translate3d(0, 0, "+this.depth/2+"px)"}return!this.flex,b}},a}]),app.factory("Story",[function(){var a=function(a,b,c,d,e,f,g,h,i){this.level=a,this.indent=b,this.height=c,this.railing_height=d,this.floor_height=e,this.pillar_indent=f,this.floors=g,this.basement_floors=h,this.structure=i,this.style=this.set_style(2)};return a.prototype={is_ground:function(){return this.level==this.basement_floors?!0:!1},is_underground:function(){return this.level<this.basement_floors?!0:!1},is_roof:function(){return this.level==this.floors-1?!0:!1},set_style:function(a){var b={base:{width:this.structure.width-2*this.indent+"px",height:this.height+this.floor_height+"px","-webkit-transform":"translate3d("+this.indent+"px, "+(-this.level*(this.height+this.floor_height)+(this.structure.basement_floors-1)*(this.height+this.floor_height))+"px, 0)"},wall:{width:this.structure.width-2*this.indent-2*this.structure.fence_indent+"px",height:this.height/2+"px","-webkit-transform":"translate3d("+this.structure.fence_indent+"px, "+-this.floor_height+"px, 0)"},floor:{width:this.structure.width-2*this.indent+"px",height:this.floor_height+"px","-webkit-transform":"translate3d(0, 0, 0)"},girder:[{width:this.structure.width-2*this.indent-2*this.structure.story_pillar_indent-this.structure.pillar_p2_width+this.structure.steel_width+"px",height:this.floor_height+"px","-webkit-transform":"translate3d("+(this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, 0, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)"},{width:this.structure.width-2*this.indent-2*this.structure.story_pillar_indent-this.structure.pillar_p2_width+this.structure.steel_width+"px",height:this.floor_height+"px","-webkit-transform":"translate3d("+(this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, 0, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)"},{width:this.structure.steel_width+"px",height:this.floor_height+"px","-webkit-transform":"translate3d("+this.indent+"px, 0, 0)"},{width:this.structure.steel_width+"px",height:this.floor_height+"px","-webkit-transform":"translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width/2-this.pillar_indent-this.structure.steel_width/2)+"px, 0, 0)"}],pillar:[{width:this.structure.steel_width+"px",height:"0","-webkit-transform":"translate3d("+(this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.structure.story_pillar_indent)+"px)"},{width:this.structure.steel_width+"px",height:"0","-webkit-transform":"translate3d("+(this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.structure.story_pillar_indent)+"px)"},{width:this.structure.steel_width+"px",height:"0","-webkit-transform":"translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)"},{width:this.structure.steel_width+"px",height:"0","-webkit-transform":"translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent+(this.structure.pillar_p2_width-this.structure.steel_width)/2)+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)"}]};return(this.is_underground()||this.is_ground())&&(b.floor.width=this.structure.width-this.indent+"px",b.floor.webkitTransform="translate3d("+-this.indent/2+"px, 0, 0)"),this.is_underground()&&(b.wall.width=this.structure.width-this.indent/2+"px",b.wall.webkitTransform="translate3d("+-this.indent/2+"px, "+-this.floor_height+"px, 0)"),1==a&&(b.pillar[0].height=this.height+"px",b.pillar[1].height=this.height+"px",b.pillar[2].height=this.height+"px",b.pillar[3].height=this.height+"px",this.is_roof()&&(b.pillar[0].height=this.structure.roof_height-this.floor_height+"px",b.pillar[1].height=this.structure.roof_height-this.floor_height+"px",b.pillar[2].height=this.structure.roof_height-this.floor_height+"px",b.pillar[3].height=this.structure.roof_height-this.floor_height+"px")),2==a&&(b.pillar[0].width=this.structure.pillar_p2_width+"px",b.pillar[0].height=this.height+"px",b.pillar[0].webkitTransform="translate3d("+this.pillar_indent+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)",b.pillar[1].width=this.structure.pillar_p2_width+"px",b.pillar[1].height=this.height+"px",b.pillar[1].webkitTransform="translate3d("+this.pillar_indent+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)",b.pillar[2].width=this.structure.pillar_p2_width+"px",b.pillar[2].height=this.height+"px",b.pillar[2].webkitTransform="translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent)+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)",b.pillar[3].width=this.structure.pillar_p2_width+"px",b.pillar[3].height=this.height+"px",b.pillar[3].webkitTransform="translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent)+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)",this.is_roof()&&(b.wall.width=this.structure.width-2*this.indent+"px",b.wall.height=this.structure.roof_height-this.floor_height+"px",b.wall.webkitTransform="translate3d(0, "+-this.floor_height+"px, 0)",b.pillar[0].height=this.structure.roof_height-this.floor_height+"px",b.pillar[1].height=this.structure.roof_height-this.floor_height+"px",b.pillar[2].height=this.structure.roof_height-this.floor_height+"px",b.pillar[3].height=this.structure.roof_height-this.floor_height+"px")),3==a&&(b.wall.width=this.structure.width-2*this.indent+"px",b.wall.height=this.height+"px",b.wall.webkitTransform="translate3d(0, "+-this.floor_height+"px, 0)",b.floor.width=this.structure.width-2*this.indent+"px",b.floor.height=this.floor_height+"px",b.pillar[0].width=this.structure.pillar_p2_width+"px",b.pillar[0].webkitTransform="translate3d("+this.pillar_indent+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)",b.pillar[1].width=this.structure.pillar_p2_width+"px",b.pillar[1].webkitTransform="translate3d("+this.pillar_indent+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)",b.pillar[2].width=this.structure.pillar_p2_width+"px",b.pillar[2].webkitTransform="translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent)+"px, "+-this.floor_height+"px, "+(-this.structure.width/2+this.indent+this.structure.pillar_p2_width/2+this.pillar_indent)+"px)",b.pillar[3].width=this.structure.pillar_p2_width+"px",b.pillar[3].webkitTransform="translate3d("+(this.structure.width-2*this.indent-this.structure.pillar_p2_width-this.pillar_indent)+"px, "+-this.floor_height+"px, "+(this.structure.width/2-this.indent-this.structure.pillar_p2_width/2-this.pillar_indent)+"px)",this.is_roof()&&(b.wall.height=this.structure.roof_height-this.floor_height+"px"),(this.is_underground()||this.is_ground())&&(b.floor.width=this.structure.width-this.indent+"px",b.floor.webkitTransform="translate3d("+-this.indent/2+"px, 0, 0)"),this.is_underground()&&(b.wall.width=this.structure.width-this.indent+"px",b.wall.height=this.height/2+"px",b.wall.webkitTransform="translate3d("+-this.indent/2+"px, "+-this.floor_height+"px, 0)")),b}},a}]),app.factory("Structure",[function(){var a=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.floors=a,this.basement_floors=b,this.width=c,this.depth=d,this.roof_height=e,this.base_indent=f,this.steel_width=g,this.fence_indent=h,this.pillar_p2_width=i,this.story_indent=j,this.story_height=k,this.story_railing_height=l,this.story_floor_height=m,this.story_pillar_indent=n,this.plot=o};return a.prototype={height:function(){return this.floors*(this.story_height+this.story_floor_height)+5},style_base:function(){return{width:this.width+"px","-webkit-transform":"translate3d("+(this.plot.width-this.width)/2+"px, -2px, 0)"}},style_basement:function(){return{width:this.width-this.story_indent+this.base_indent/2+"px",height:this.basement_floors*(this.story_height+this.story_floor_height)+"px","-webkit-transform":"translate3d("+(this.story_indent/2-this.base_indent/4)+"px, 0, 0)"}},style_base_tile:function(){return{width:this.width-this.base_indent+"px",height:this.width-this.base_indent+"px",border:(this.plot.width-(this.width-this.base_indent))/2+"px solid "+this.plot.pallet.dirt,"-webkit-transform":"translate3d("+-(this.plot.width-this.width)/2+"px, "+-this.plot.width/2+"px, 1px) rotateX(90deg)"}}},a}]);var transform=function(){return function(a){var b="";return b+="-webkit-transform: "+a+";",b+="-moz-transform: "+a+";",b+="-ms-transform: "+a+";",b+="-o-transform: "+a+";",b+="transform: "+a+";"}};app.filter("transform",transform);